function makeUsersArray () {
  return [
    {
      user_email: 'user_1@gmail.com',
      user_password: 123456
    },
    {
      user_email: 'user_2@gmail.com',
      user_password: 123456
    },
    {
      user_email: 'user_2@gmail.com',
      user_password: 123456
    },
    {
      user_email: 'test@test.com',
      user_password: 'password'
    },
  ];
}

function makePartyArray() {
  return [
    {
      name: "Coolest Test Party"
    },
    {
      name: "Another Cool Party"
    },
    {
      name: "Supercool Party"
    }
  ]
}

function testCharacter () {
  return [
    {
      name: "updated",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 88,
      hand_size: 5,
      health: 12,
      equipment_pack_id: 1,
      party_id: 1,
      user_id: 1,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    }
  ]
}
function fullTestCharacter () {
  return {
    name: 'New Test Dude',
    race: "Human",
    char_class: "Arcane",
    sub_class: "Wizard",
    xp: 66,
    hand_size: 6,
    health: 6,
    arcane: 3,
    deception: 4,
    martial: 2,
    devotion: 2,
    party_id: 1,
    user_id: 1,
    sticker_1_id: 1,
    sticker_2_id: 2,
    sticker_3_id: 3,
    sticker_4_id: 4,
    sticker_5_id: 5,
    sticker_6_id: 1
    }
}
function failTestCharacter () {
  return {
    race: "Human",
    char_class: "Arcane",
    sub_class: "Wizard",
    xp: 66,
    hand_size: 6,
    health: 6,
    arcane: 3,
    deception: 4,
    martial: 2,
    devotion: 2,
    party_id: 1,
    user_id: 1,
    sticker_1_id: 1,
    sticker_2_id: 2,
    sticker_3_id: 3,
    sticker_4_id: 4,
    sticker_5_id: 5,
    sticker_6_id: 1
    }

}
function makeCharactersArray () {
  return [
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 1,
      party_id: 1,
      user_id: 1,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 1,
      party_id: 1,
      user_id: 1,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 3,
      party_id: 1,
      user_id: 1,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 2,
      party_id: 1,
      user_id: 1,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 2,
      party_id: 3,
      user_id: 2,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 2,
      party_id: 2,
      user_id: 2,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 2,
      party_id: 2,
      user_id: 2,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
    {
      name: "opha",
      race: "Human",
      char_class: "Arcane",
      sub_class: "Wizard",
      xp: 30,
      hand_size: 5,
      health: 10,
      equipment_pack_id: 2,
      party_id: 2,
      user_id: 2,
      sticker_1_id: 1,
      sticker_2_id: 2,
      sticker_3_id: 3,
      sticker_4_id: 4,
      sticker_5_id: 5,
      sticker_6_id: 1
    },
  ]
}
function makeEquipPack () {
  return [
    {
      arcane: 5,
      deception: 2,
      martial: 1,
      devotion: 1
    },
    {
      arcane: 3,
      deception: 2,
      martial: 1,
      devotion: 1
    },
    {
      arcane: 1,
      deception: 2,
      martial: 1,
      devotion: 1
    },
    {
      arcane: 5,
      deception: 2,
      martial: 1,
      devotion: 1
    },
  ]
}

function seedData (db, users, parties, features, characters) {
  return db.transaction(async trx => {
    trx.into('users').insert(users)
    trx.into('party').insert(parties)
    trx.into('characters').insert(characters)
  })
}
function cleanTables(db) {
  return db.transaction(trx =>
    trx.raw(
      `TRUNCATE users CASCADE;
        TRUNCATE characters CASCADE;
        TRUNCATE party CASCADE;
        TRUNCATE equipment_pack CASCADE;
      `
    )
    .then(() =>
      Promise.all([
        trx.raw(`
          ALTER SEQUENCE users_user_id_seq minvalue 0 START WITH 1;
          ALTER SEQUENCE characters_char_id_seq minvalue 0 START WITH 1;
          ALTER SEQUENCE equipment_pack_equipment_pack_id_seq minvalue 0 START WITH 1;
          ALTER SEQUENCE party_party_id_seq minvalue 0 START WITH 1;
          ALTER SEQUENCE stickers_sticker_id_seq minvalue 0 START WITH 1;
          `),
        trx.raw(`
          SELECT setval('users_user_id_seq', 0);
          SELECT setval('characters_char_id_seq', 0);
          SELECT setval('equipment_pack_equipment_pack_id_seq', 0);
          SELECT setval('stickers_sticker_id_seq', 0);
          SELECT setval('party_party_id_seq', 0);
          `)
      ])
    )
  )
}

function makeNewParty(){
  return
    {
      name: "New Test Party"
    }
}

function makeAuthHeader(users){
  const token = Buffer.from(`${users.user_email}:${users.user_password}`).toString('base64');
  return `Basic ${token}`
}
module.exports = {
  makeUsersArray,
  seedData,
  cleanTables,
  makePartyArray,
  makeCharactersArray,
  makeEquipPack,
  testCharacter,
  makeNewParty,
  fullTestCharacter,
  failTestCharacter,
  makeAuthHeader,
};
